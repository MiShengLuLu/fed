{"version":3,"sources":["webpack:///./src/services/courses.ts","webpack:///./src/views/course/index.vue?1943","webpack:///./src/views/course/index.vue?bd67","webpack:///./src/views/course/index.vue","webpack:///./src/views/course/index.vue?7da9"],"names":["getQueryCourses","data","method","url","changeState","params","avatarUpload","saveOrUpdateCourse","getCourseById","courseId","getSectionAndLesson","saveOrUpdateSection","getBySectionId","sectionId","saveOrUpdate","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","render","_ctx","_cache","$props","$setup","$data","$options","_component_a_input","_component_a_form_item","_component_a_select_option","_component_a_select","_component_a_button","_component_a_divider","_component_a_form","_component_a_switch","_component_a_table","_component_a_pagination","_component_a_card","bordered","title","ref","layout","model","formState","default","label","name","value","courseName","$event","placeholder","_","status","style","type","onClick","loadCourses","disabled","loading","onReset","$router","push","danger","columns","courses","pagination","rowKey","scroll","x","y","scrollY","switch","record","checked","checkedValue","unCheckedValue","onChange","statusChange","action","id","current","currentPage","pageSize","total","onShowSizeChange","onPageChange","dataIndex","slots","customRender","fixed","width","align","setup","formRef","state","resetFields","code","records","page","message","success","mesg","error","created","this","mounted","tableScrollCalculate","window","addEventListener","methods","el","document","querySelector","clientHeight","__exports__"],"mappings":"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","file":"js/course.193857ab.js","sourcesContent":["import request from '@/utils/request'\nimport { Result } from '@/types/base'\nimport { CourseQuery, Course, UploadFile, FormState, Section, Lesson } from '@/types/courses'\n\ninterface GetCourses extends Result {\n  data: {\n    records: Course[],\n    total: number\n  }\n}\ninterface Update extends Result {\n  data: boolean\n}\n\ninterface UploadResult extends Result {\n  data: UploadFile\n}\n\ninterface UpdateCourse extends Result {\n  data: FormState\n}\n\ninterface SectionResult extends Result {\n  data: Section[]\n}\n\n// 获取课程\nexport const getQueryCourses = (data: CourseQuery & { pageSize: number; currentPage: number }): Promise<{ data: GetCourses }> => {\n  return request({\n    method: 'post',\n    url: '/boss/course/getQueryCourses',\n    data\n  })\n}\n// 课程上下架\nexport const changeState = (params: { courseId: number; status: number }): Promise<{ data: Update}> => {\n  return request({\n    method: 'get',\n    url: 'boss/course/changeState',\n    params\n  })\n}\n\n// 图片上传\nexport const avatarUpload = (data: FormData): Promise<{ data: UploadResult }> => {\n  return request({\n    method: 'post',\n    url: '/boss/course/upload',\n    data\n  })\n}\n\n// 更新课程信息\nexport const saveOrUpdateCourse = (data: FormState): Promise<{ data: Result }> => {\n  return request({\n    method: 'post',\n    url: '/boss/course/saveOrUpdateCourse',\n    data\n  })\n}\n\n// 根据 id 查询课程信息\nexport const getCourseById = (courseId: number): Promise<{ data: UpdateCourse }> => {\n  return request({\n    method: 'get',\n    url: '/boss/course/getCourseById',\n    params: {\n      courseId\n    }\n  })\n}\n\n// 获取课程的模块与课时\nexport const getSectionAndLesson = (courseId: number): Promise<{ data: SectionResult }> => {\n  return request({\n    method: 'get',\n    url: '/boss/course/section/getSectionAndLesson',\n    params: {\n      courseId\n    }\n  })\n}\n\n// 保存课程章节信息\nexport const saveOrUpdateSection = (data: Section & { courseId: number }): Promise<{ data: Result }> => {\n  return request({\n    method: 'post',\n    url: '/boss/course/section/saveOrUpdateSection',\n    data\n  })\n}\n\n// 查询章节信息\nexport const getBySectionId = (sectionId: number): Promise<{ data: Result & { data: Section }}> => {\n  return request({\n    method: 'get',\n    url: '/boss/course/section/getBySectionId',\n    params: {\n      sectionId\n    }\n  })\n}\n\n// 保存课时信息\nexport const saveOrUpdate = (data: Lesson & { courseId: number }): Promise<{ data: Result }> => {\n  return request({\n    method: 'post',\n    url: '/boss/course/lesson/saveOrUpdate',\n    data\n  })\n}\n\n// 图片上传\nexport const imgUpload = (data: FormData): Promise<{ data: Result }> => {\n  return request({\n    method: 'post',\n    url: '/boss/course/upload',\n    data\n  })\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=932f7dac&lang=scss&scoped=true\"","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-932f7dac\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main-container\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"全部\")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\"启用\")\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"禁用\")\nconst _hoisted_5 = /*#__PURE__*/_createTextVNode(\" 查询 \")\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\" 重置 \")\nconst _hoisted_7 = /*#__PURE__*/_createTextVNode(\"新增课程\")\nconst _hoisted_8 = [\"onClick\"]\nconst _hoisted_9 = [\"onClick\"]\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_a_input = _resolveComponent(\"a-input\")!\n  const _component_a_form_item = _resolveComponent(\"a-form-item\")!\n  const _component_a_select_option = _resolveComponent(\"a-select-option\")!\n  const _component_a_select = _resolveComponent(\"a-select\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_divider = _resolveComponent(\"a-divider\")!\n  const _component_a_form = _resolveComponent(\"a-form\")!\n  const _component_a_switch = _resolveComponent(\"a-switch\")!\n  const _component_a_table = _resolveComponent(\"a-table\")!\n  const _component_a_pagination = _resolveComponent(\"a-pagination\")!\n  const _component_a_card = _resolveComponent(\"a-card\")!\n\n  return (_openBlock(), _createElementBlock(\"section\", _hoisted_1, [\n    _createVNode(_component_a_card, { bordered: false }, {\n      title: _withCtx(() => [\n        _createVNode(_component_a_form, {\n          ref: \"formRef\",\n          layout: \"inline\",\n          model: _ctx.formState\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_a_form_item, {\n              label: \"课程名称\",\n              name: \"courseName\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_input, {\n                  value: _ctx.formState.courseName,\n                  \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.formState.courseName) = $event)),\n                  placeholder: \"请输入课程名称\"\n                }, null, 8, [\"value\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_a_form_item, {\n              label: \"课程状态\",\n              name: \"status\"\n            }, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_select, {\n                  value: _ctx.formState.status,\n                  \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.formState.status) = $event)),\n                  placeholder: \"请选择课程状态\",\n                  style: {\"width\":\"180px\"}\n                }, {\n                  default: _withCtx(() => [\n                    _createVNode(_component_a_select_option, { value: null }, {\n                      default: _withCtx(() => [\n                        _hoisted_2\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_a_select_option, { value: 1 }, {\n                      default: _withCtx(() => [\n                        _hoisted_3\n                      ]),\n                      _: 1\n                    }),\n                    _createVNode(_component_a_select_option, { value: 0 }, {\n                      default: _withCtx(() => [\n                        _hoisted_4\n                      ]),\n                      _: 1\n                    })\n                  ]),\n                  _: 1\n                }, 8, [\"value\"])\n              ]),\n              _: 1\n            }),\n            _createVNode(_component_a_form_item, null, {\n              default: _withCtx(() => [\n                _createVNode(_component_a_button, {\n                  type: \"primary\",\n                  onClick: _ctx.loadCourses,\n                  disabled: _ctx.loading\n                }, {\n                  default: _withCtx(() => [\n                    _hoisted_5\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]),\n                _createVNode(_component_a_divider, { type: \"vertical\" }),\n                _createVNode(_component_a_button, {\n                  onClick: _ctx.onReset,\n                  disabled: _ctx.loading\n                }, {\n                  default: _withCtx(() => [\n                    _hoisted_6\n                  ]),\n                  _: 1\n                }, 8, [\"onClick\", \"disabled\"]),\n                _createVNode(_component_a_divider, { type: \"vertical\" }),\n                _createVNode(_component_a_button, {\n                  onClick: _cache[2] || (_cache[2] = ($event: any) => (_ctx.$router.push({\n              name: 'courseAdd'\n            }))),\n                  danger: \"\"\n                }, {\n                  default: _withCtx(() => [\n                    _hoisted_7\n                  ]),\n                  _: 1\n                })\n              ]),\n              _: 1\n            })\n          ]),\n          _: 1\n        }, 8, [\"model\"])\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_a_table, {\n          columns: _ctx.columns,\n          \"data-source\": _ctx.courses,\n          pagination: false,\n          rowKey: \"id\",\n          scroll: { x: 1100, y: _ctx.scrollY },\n          loading: _ctx.loading\n        }, {\n          switch: _withCtx(({ record }) => [\n            _createVNode(_component_a_switch, {\n              checked: record.status,\n              \"onUpdate:checked\": ($event: any) => ((record.status) = $event),\n              checkedValue: 1,\n              unCheckedValue: 0,\n              onChange: (checked) => _ctx.statusChange(checked, record)\n            }, null, 8, [\"checked\", \"onUpdate:checked\", \"onChange\"])\n          ]),\n          action: _withCtx(({ record }) => [\n            _createElementVNode(\"span\", null, [\n              _createElementVNode(\"a\", {\n                onClick: ($event: any) => (_ctx.$router.push({\n              name: 'courseEdit',\n              params: {\n                courseId: record.id\n              }\n            }))\n              }, \"编辑\", 8, _hoisted_8),\n              _createVNode(_component_a_divider, { type: \"vertical\" }),\n              _createElementVNode(\"a\", {\n                onClick: ($event: any) => (_ctx.$router.push({\n              name: 'lesson',\n              params: {\n                courseId: record.id\n              }\n            }))\n              }, \"内容管理\", 8, _hoisted_9)\n            ])\n          ]),\n          _: 1\n        }, 8, [\"columns\", \"data-source\", \"scroll\", \"loading\"]),\n        _createVNode(_component_a_pagination, {\n          \"show-size-changer\": \"\",\n          current: _ctx.currentPage,\n          \"onUpdate:current\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.currentPage) = $event)),\n          pageSize: _ctx.pageSize,\n          \"onUpdate:pageSize\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.pageSize) = $event)),\n          total: _ctx.total,\n          onShowSizeChange: _ctx.onShowSizeChange,\n          onChange: _ctx.onPageChange\n        }, null, 8, [\"current\", \"pageSize\", \"total\", \"onShowSizeChange\", \"onChange\"])\n      ]),\n      _: 1\n    })\n  ]))\n}","\nimport { defineComponent, reactive, ref, toRaw, toRefs, UnwrapRef } from 'vue'\nimport { getQueryCourses, changeState } from '@/services/courses'\nimport { CourseQuery, Course } from '@/types/courses'\nimport { message } from 'ant-design-vue'\n\ninterface FormState extends CourseQuery {\n  currentPage: number;\n  pageSize: number\n}\n\nconst columns = [\n  {\n    title: 'ID',\n    dataIndex: 'id'\n  },\n  {\n    title: '课程名称',\n    dataIndex: 'courseName'\n  },\n  {\n    title: '价格',\n    dataIndex: 'price'\n  },\n  {\n    title: '排序',\n    dataIndex: 'sortNum'\n  },\n  {\n    title: '状态',\n    dataIndex: 'status',\n    slots: { customRender: 'switch' }\n  },\n  {\n    title: '操作',\n    dataIndex: 'action',\n    fixed: 'right',\n    width: 200,\n    align: 'center',\n    slots: { customRender: 'action' }\n  }\n]\n\nexport default defineComponent({\n  name: 'Courses',\n  data () {\n    return {\n      scrollY: 400\n    }\n  },\n  setup () {\n    const formRef = ref()\n    const state = reactive({\n      loading: false,\n      courses: ref<Course[]>([]),\n      total: 0,\n      currentPage: 0,\n      pageSize: 10\n    })\n    const formState: UnwrapRef<FormState> = reactive({\n      currentPage: 0,\n      pageSize: 10,\n      courseName: '',\n      status: null\n    })\n\n    // onReset\n    const onReset = () => {\n      formRef.value.resetFields()\n    }\n\n    // 获取课程列表\n    const loadCourses = async () => {\n      const { data } = await getQueryCourses(toRaw(formState))\n      if (data.code === '000000') {\n        state.courses = data.data.records\n        state.total = data.data.total\n      }\n    }\n\n    // onShowSizeChange\n    const onShowSizeChange = (current: number, pageSize: number) => {\n      state.pageSize = pageSize\n      loadCourses()\n    }\n\n    // onPageChange\n    const onPageChange = (page: number) => {\n      state.currentPage = page\n      loadCourses()\n    }\n    // 启用/禁用\n    const statusChange = async (status: number, record: Course) => {\n      const { data } = await changeState({\n        status,\n        courseId: record.id\n      })\n      if (data.code !== '000000') {\n        message.success(data.mesg)\n      } else {\n        message.error(data.mesg)\n      }\n    }\n    return {\n      formRef,\n      ...toRefs(state),\n      formState,\n      onReset,\n      loadCourses,\n      columns,\n      onShowSizeChange,\n      onPageChange,\n      statusChange\n    }\n  },\n  created () {\n    this.loadCourses()\n  },\n  async mounted () {\n    this.tableScrollCalculate()\n    window.addEventListener('resize', async () => {\n      this.tableScrollCalculate()\n    })\n  },\n  methods: {\n    tableScrollCalculate () {\n      const el = document.querySelector('.ant-spin-container')\n      if (el && el?.clientHeight > 400) {\n        this.scrollY = el?.clientHeight - 55 - 64\n      }\n    }\n  }\n})\n","import { render } from \"./index.vue?vue&type=template&id=932f7dac&scoped=true&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=932f7dac&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/fed/fed/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-932f7dac\"]])\n\nexport default __exports__"],"sourceRoot":""}