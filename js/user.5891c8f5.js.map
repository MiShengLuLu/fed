{"version":3,"sources":["webpack:///./src/views/user/index.vue?a1c4","webpack:///./src/services/roles.ts","webpack:///./src/views/user/index.vue?53a1","webpack:///./src/views/user/index.vue","webpack:///./src/views/user/index.vue?e3ea"],"names":["query","data","method","url","update","getRoleById","id","del","getRoles","allocateUserRoles","getRolesById","userId","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","key","_hoisted_6","render","_ctx","_cache","$props","$setup","$data","$options","_component_a_input","_component_a_form_item","_component_a_range_picker","_component_a_button","_component_a_divider","_component_a_form","_component_a_badge","_component_a_popconfirm","_component_a_table","_component_a_pagination","_component_a_card","_component_a_select_option","_component_a_select","_component_a_modal","bordered","title","ref","layout","model","formState","default","label","name","value","phone","$event","placeholder","_","time","onChange","type","onClick","loadUserPage","disabled","loading","onReset","pagination","columns","dataSource","rowKey","scroll","x","y","scrollY","badge","record","color","status","operation","length","onConfirm","changeStatus","assignRoles","current","currentPage","total","pageSize","showTotal","onShowSizeChange","changePageSize","changePage","buildOptionText","props","visible","confirmLoading","onOk","handleOk","onCancel","cancel","mode","roleIdList","style","roles","item","dataIndex","width","slots","customRender","fixed","align","startCreateTime","endCreateTime","setup","state","formRef","undefined","resetFields","code","records","size","dates","dateStrings","message","success","mesg","error","loadRoles","getUserRoles","forEach","push","created","this","mounted","tableScrollCalculate","window","addEventListener","methods","el","document","querySelector","clientHeight","__exports__"],"mappings":"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","file":"js/user.5891c8f5.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=4627a70e&lang=scss&scoped=true\"","import { Result } from '@/types/base'\nimport { Role } from '@/types/roles'\nimport request from '@/utils/request'\n\ninterface GetRoles extends Result {\n  data: {\n    records: Array<Role>,\n    total: number\n  }\n}\n\ninterface Update extends Result {\n  data: boolean\n}\n\ninterface GetAllRole extends Result {\n  data: Role[]\n}\n\ninterface GetRole extends Result {\n  data: Role\n}\n\n// 根据分页搜索条件查询角色列表\nexport const query = (data: Role): Promise<{ data: GetRoles }> => {\n  return request({\n    method: 'post',\n    url: '/boss/role/getRolePages',\n    data\n  })\n}\n\n// 更新角色信息\nexport const update = (data: Role): Promise<{ data: Update}> => {\n  return request({\n    method: 'post',\n    url: '/boss/role/saveOrUpdate',\n    data\n  })\n}\n\n// 根据 id 查询角色\nexport const getRoleById = (id: number): Promise<{ data: GetRole }> => {\n  return request({\n    method: 'get',\n    url: `/boss/role/${id}`\n  })\n}\n\n// 删除角色信息\nexport const del = (id: number): Promise<{ data: Update }> => {\n  return request({\n    method: 'delete',\n    url: `/boss/role/${id}`\n  })\n}\n\n// 获取所有角色\nexport const getRoles = (): Promise<{ data: GetAllRole }> => {\n  return request({\n    method: 'get',\n    url: '/boss/role/all'\n  })\n}\n\n// 给用户分配角色\nexport const allocateUserRoles = (data: { userId: number; roleIdList: number[] }): Promise<{ data: Update}> => {\n  return request({\n    method: 'post',\n    url: '/boss/role/allocateUserRoles',\n    data\n  })\n}\n\n// 查询用户角色\nexport const getRolesById = (userId: number): Promise<{ data: GetAllRole }> => {\n  return request({\n    method: 'get',\n    url: `/boss/role/user/${userId}`\n  })\n}\n","import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, createTextVNode as _createTextVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-4627a70e\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main-container\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\" 查询 \")\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" 重置 \")\nconst _hoisted_4 = [\"onClick\"]\nconst _hoisted_5 = { key: 0 }\nconst _hoisted_6 = { key: 1 }\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_a_input = _resolveComponent(\"a-input\")!\n  const _component_a_form_item = _resolveComponent(\"a-form-item\")!\n  const _component_a_range_picker = _resolveComponent(\"a-range-picker\")!\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_divider = _resolveComponent(\"a-divider\")!\n  const _component_a_form = _resolveComponent(\"a-form\")!\n  const _component_a_badge = _resolveComponent(\"a-badge\")!\n  const _component_a_popconfirm = _resolveComponent(\"a-popconfirm\")!\n  const _component_a_table = _resolveComponent(\"a-table\")!\n  const _component_a_pagination = _resolveComponent(\"a-pagination\")!\n  const _component_a_card = _resolveComponent(\"a-card\")!\n  const _component_a_select_option = _resolveComponent(\"a-select-option\")!\n  const _component_a_select = _resolveComponent(\"a-select\")!\n  const _component_a_modal = _resolveComponent(\"a-modal\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_component_a_card, { bordered: false }, {\n        title: _withCtx(() => [\n          _createVNode(_component_a_form, {\n            ref: \"formRef\",\n            layout: \"inline\",\n            model: _ctx.formState\n          }, {\n            default: _withCtx(() => [\n              _createVNode(_component_a_form_item, {\n                label: \"手机号\",\n                name: \"phone\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_a_input, {\n                    value: _ctx.formState.phone,\n                    \"onUpdate:value\": _cache[0] || (_cache[0] = ($event: any) => ((_ctx.formState.phone) = $event)),\n                    placeholder: \"请输入手机号\"\n                  }, null, 8, [\"value\"])\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_a_form_item, {\n                label: \"注册时间\",\n                name: \"time\"\n              }, {\n                default: _withCtx(() => [\n                  _createVNode(_component_a_range_picker, {\n                    value: _ctx.formState.time,\n                    \"onUpdate:value\": _cache[1] || (_cache[1] = ($event: any) => ((_ctx.formState.time) = $event)),\n                    onChange: _ctx.onChange\n                  }, null, 8, [\"value\", \"onChange\"])\n                ]),\n                _: 1\n              }),\n              _createVNode(_component_a_form_item, null, {\n                default: _withCtx(() => [\n                  _createVNode(_component_a_button, {\n                    type: \"primary\",\n                    onClick: _ctx.loadUserPage,\n                    disabled: _ctx.loading\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_2\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\", \"disabled\"]),\n                  _createVNode(_component_a_divider, { type: \"vertical\" }),\n                  _createVNode(_component_a_button, {\n                    onClick: _ctx.onReset,\n                    disabled: _ctx.loading\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_3\n                    ]),\n                    _: 1\n                  }, 8, [\"onClick\", \"disabled\"])\n                ]),\n                _: 1\n              })\n            ]),\n            _: 1\n          }, 8, [\"model\"])\n        ]),\n        default: _withCtx(() => [\n          _createVNode(_component_a_table, {\n            pagination: false,\n            columns: _ctx.columns,\n            \"data-source\": _ctx.dataSource,\n            rowKey: \"id\",\n            scroll: { x: 1000, y: _ctx.scrollY },\n            loading: _ctx.loading\n          }, {\n            badge: _withCtx(({ record }) => [\n              _createVNode(_component_a_badge, {\n                color: record.status === 'ENABLE' ? 'lime' : 'red'\n              }, null, 8, [\"color\"])\n            ]),\n            operation: _withCtx(({ record }) => [\n              _createElementVNode(\"span\", null, [\n                (_ctx.dataSource.length)\n                  ? (_openBlock(), _createBlock(_component_a_popconfirm, {\n                      key: 0,\n                      title: `确认${record.status === 'ENABLE' ? '禁用' : '启用'}？`,\n                      onConfirm: ($event: any) => (_ctx.changeStatus(record))\n                    }, {\n                      default: _withCtx(() => [\n                        _createElementVNode(\"a\", null, _toDisplayString(record.status === 'ENABLE' ? '禁用' : '启用'), 1)\n                      ]),\n                      _: 2\n                    }, 1032, [\"title\", \"onConfirm\"]))\n                  : _createCommentVNode(\"\", true),\n                _createVNode(_component_a_divider, { type: \"vertical\" }),\n                _createElementVNode(\"a\", {\n                  onClick: ($event: any) => (_ctx.assignRoles(record.id))\n                }, \"分配角色\", 8, _hoisted_4)\n              ])\n            ]),\n            _: 1\n          }, 8, [\"columns\", \"data-source\", \"scroll\", \"loading\"]),\n          _createVNode(_component_a_pagination, {\n            current: _ctx.currentPage,\n            \"onUpdate:current\": _cache[2] || (_cache[2] = ($event: any) => ((_ctx.currentPage) = $event)),\n            total: _ctx.total,\n            \"show-size-changer\": \"\",\n            \"show-quick-jumper\": \"\",\n            \"page-size\": _ctx.pageSize,\n            showTotal: total => `总共 ${total} 条`,\n            onShowSizeChange: _ctx.changePageSize,\n            onChange: _ctx.changePage,\n            disabled: _ctx.loading\n          }, {\n            buildOptionText: _withCtx((props) => [\n              (props.value !== '50')\n                ? (_openBlock(), _createElementBlock(\"span\", _hoisted_5, _toDisplayString(props.value) + \"条/页\", 1))\n                : (_openBlock(), _createElementBlock(\"span\", _hoisted_6, \"全部\"))\n            ]),\n            _: 1\n          }, 8, [\"current\", \"total\", \"page-size\", \"showTotal\", \"onShowSizeChange\", \"onChange\", \"disabled\"])\n        ]),\n        _: 1\n      })\n    ]),\n    _createVNode(_component_a_modal, {\n      title: \"分配角色\",\n      visible: _ctx.visible,\n      \"onUpdate:visible\": _cache[4] || (_cache[4] = ($event: any) => ((_ctx.visible) = $event)),\n      \"confirm-loading\": _ctx.confirmLoading,\n      onOk: _ctx.handleOk,\n      onCancel: _ctx.cancel\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_a_select, {\n          mode: \"multiple\",\n          value: _ctx.roleIdList,\n          \"onUpdate:value\": _cache[3] || (_cache[3] = ($event: any) => ((_ctx.roleIdList) = $event)),\n          style: {\"width\":\"100%\"},\n          placeholder: \"请选择\"\n        }, {\n          default: _withCtx(() => [\n            (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.roles, (item) => {\n              return (_openBlock(), _createBlock(_component_a_select_option, {\n                key: item.id\n              }, {\n                default: _withCtx(() => [\n                  _createTextVNode(_toDisplayString(item.name), 1)\n                ]),\n                _: 2\n              }, 1024))\n            }), 128))\n          ]),\n          _: 1\n        }, 8, [\"value\"])\n      ]),\n      _: 1\n    }, 8, [\"visible\", \"confirm-loading\", \"onOk\", \"onCancel\"])\n  ], 64))\n}","\nimport { defineComponent, reactive, ref, toRefs, UnwrapRef, toRaw } from 'vue'\nimport { getUserPage, forbidUser, enableUser } from '@/services/user'\nimport { getRoles, allocateUserRoles, getRolesById } from '@/services/roles'\nimport { UserItem } from '@/types/user'\nimport { Role } from '@/types/roles'\nimport { Moment } from 'moment'\nimport { message } from 'ant-design-vue'\n\nconst columns = [\n  {\n    title: '用户ID',\n    dataIndex: 'id',\n    width: 80\n  },\n  {\n    title: '头像',\n    dataIndex: 'portrait',\n    width: 60,\n    slots: { customRender: 'img' }\n  },\n  {\n    title: '用户名',\n    dataIndex: 'name',\n    width: 160\n  },\n  {\n    title: '手机号',\n    dataIndex: 'phone',\n    width: 160\n  },\n  {\n    title: '注册时间',\n    dataIndex: 'createTime',\n    width: 180\n  },\n  {\n    title: '状态',\n    dataIndex: 'status',\n    width: 60,\n    slots: { customRender: 'badge' }\n  },\n  {\n    title: '操作',\n    dataIndex: 'operation',\n    fixed: 'right',\n    width: 200,\n    align: 'center',\n    slots: { customRender: 'operation' }\n  }\n]\nconst query = {\n  phone: '',\n  startCreateTime: '',\n  endCreateTime: ''\n}\n\nexport default defineComponent({\n  name: 'User',\n  data () {\n    return {\n      scrollY: 400\n    }\n  },\n  setup () {\n    const state = reactive({\n      dataSource: ref<UserItem[]>([]),\n      loading: ref<boolean>(false),\n      currentPage: 1,\n      pageSize: 10,\n      total: 0,\n      time: ref<Moment[]>([]),\n      roles: ref<Role[]>([]),\n      userId: ref<number>(),\n      roleIdList: ref<number[]>([]),\n      visible: ref<boolean>(false),\n      confirmLoading: ref<boolean>(false)\n    })\n    const formRef = ref()\n    const formState: UnwrapRef<{ phone: string; time: Moment | undefined }> = reactive({\n      phone: '',\n      time: undefined\n    })\n    // const visible = ref<boolean>(false)\n\n    // 重置\n    const onReset = () => {\n      formRef.value.resetFields()\n      // 重置分页数据\n      state.currentPage = 1\n      // 重置 query 数据\n      query.phone = ''\n      query.startCreateTime = ''\n      query.endCreateTime = ''\n      // 重新查询列表\n      loadUserPage()\n    }\n\n    // 根据条件查询用户列表\n    const loadUserPage = async () => {\n      state.loading = true\n      try {\n        const { startCreateTime, endCreateTime } = query\n        const { phone } = toRaw(formState)\n        const { data } = await getUserPage({\n          phone,\n          startCreateTime,\n          endCreateTime,\n          currentPage: state.currentPage,\n          pageSize: state.pageSize\n        })\n        if (data.code === '000000') {\n          state.dataSource = data.data.records\n          state.total = data.data.total\n        }\n        state.loading = false\n      } catch (error) {\n        state.loading = true\n      }\n    }\n    // 分页 change\n    const changePage = (current: number) => {\n      state.currentPage = current\n      loadUserPage()\n    }\n    const changePageSize = (current: number, size: number) => {\n      state.currentPage = 1\n      state.pageSize = size\n      loadUserPage()\n    }\n    // datePicker\n    const onChange = (dates: [Moment, Moment] | [string, string], dateStrings: [string, string]) => {\n      query.startCreateTime = dateStrings[0]\n      query.endCreateTime = dateStrings[1]\n    }\n    const changeStatus = async (record: UserItem) => {\n      if (record.status === 'ENABLE') {\n        const { data } = await forbidUser(record.id)\n        if (data.code === '000000') {\n          message.success(data.mesg)\n        } else {\n          message.error(data.mesg)\n        }\n      } else {\n        const { data } = await enableUser(record.id)\n        if (data.code === '000000') {\n          message.success(data.mesg)\n        } else {\n          message.error(data.mesg)\n        }\n      }\n    }\n    // 获取所有角色\n    const loadRoles = async () => {\n      const { data } = await getRoles()\n      if (data.code === '000000') {\n        state.roles = data.data\n      }\n    }\n    // 分配角色\n    const assignRoles = (id: number) => {\n      // 查询用户拥有的角色\n      getUserRoles(id)\n\n      state.visible = true\n      state.userId = id\n    }\n    // 为用户分配角色\n    const handleOk = async () => {\n      state.confirmLoading = true\n      try {\n        if (state.userId) {\n          const { data } = await allocateUserRoles({\n            userId: state.userId,\n            roleIdList: state.roleIdList\n          })\n          if (data.code === '000000') {\n            message.success(data.mesg)\n            cancel()\n          } else {\n            message.error(data.mesg)\n          }\n          state.confirmLoading = false\n        }\n      } catch (error) {\n        state.confirmLoading = false\n      }\n    }\n    // cancel\n    const cancel = () => {\n      // 关闭模态框\n      state.visible = false\n      // 重置数据\n      state.roleIdList = []\n    }\n    // 查询用户角色\n    const getUserRoles = async (userId: number) => {\n      const { data } = await getRolesById(userId)\n      if (data.code === '000000') {\n        data.data.forEach(item => {\n          item.id && state.roleIdList.push(item.id)\n        })\n      }\n    }\n    return {\n      formRef,\n      ...toRefs(state),\n      columns,\n      formState,\n      loadUserPage,\n      onReset,\n      changePage,\n      changePageSize,\n      onChange,\n      changeStatus,\n      loadRoles,\n      handleOk,\n      cancel,\n      assignRoles\n    }\n  },\n  created () {\n    this.loadUserPage()\n    this.loadRoles()\n  },\n  async mounted () {\n    this.tableScrollCalculate()\n    window.addEventListener('resize', async () => {\n      this.tableScrollCalculate()\n    })\n  },\n  methods: {\n    tableScrollCalculate () {\n      const el = document.querySelector('.ant-spin-container')\n      if (el && el?.clientHeight > 400) {\n        this.scrollY = el?.clientHeight - 55 - 64\n      }\n    }\n  }\n})\n","import { render } from \"./index.vue?vue&type=template&id=4627a70e&scoped=true&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=4627a70e&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/fed/fed/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-4627a70e\"]])\n\nexport default __exports__"],"sourceRoot":""}