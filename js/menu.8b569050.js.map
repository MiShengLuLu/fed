{"version":3,"sources":["webpack:///./src/services/menu.ts","webpack:///./src/views/menu/index.vue?91d9","webpack:///./src/views/menu/index.vue?0b59","webpack:///./src/views/menu/index.vue","webpack:///./src/views/menu/index.vue?9832"],"names":["menuUpdate","data","method","url","getEditMenu","id","params","getAllMenus","menuDelete","getMenuNodeList","allocateRoleMenus","getRoleMenus","roleId","n","_hoisted_1","class","_hoisted_2","_hoisted_3","_hoisted_4","render","_ctx","_cache","$props","$setup","$data","$options","_component_a_button","_component_a_divider","_component_a_popconfirm","_component_a_table","_component_a_card","bordered","title","onClick","$event","$router","push","name","default","_","columns","menus","rowKey","scroll","x","y","scrollY","loading","index","record","operation","type","length","key","onConfirm","onDelete","dataIndex","width","fixed","align","slots","customRender","setup","state","created","this","loadAllMenus","mounted","tableScrollCalculate","window","addEventListener","methods","code","menu","message","success","mesg","error","el","document","querySelector","clientHeight","__exports__"],"mappings":"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","file":"js/menu.8b569050.js","sourcesContent":["import request from '@/utils/request'\nimport { FormState, MenuItem } from '@/types/menu'\nimport { Result } from '@/types/base'\n\ninterface MenuUpdate extends Result {\n  data: boolean\n}\n\ninterface GetEditMenu extends Result {\n  data: {\n    parentMenuList: FormState[];\n    menuInfo: FormState\n  }\n}\n\ninterface GetAllMenus extends Result {\n  data: Array<FormState>\n}\n\ninterface GetMenuNodeList extends Result {\n  data: Array<MenuItem>\n}\n\n// 更新菜单\nexport const menuUpdate = (data: FormState): Promise<{ data: MenuUpdate }> => {\n  return request({\n    method: 'post',\n    url: '/boss/menu/saveOrUpdate',\n    data\n  })\n}\n\n// 获取上一级菜单\nexport const getEditMenu = (id = -1): Promise<{ data: GetEditMenu }> => {\n  return request({\n    method: 'get',\n    url: '/boss/menu/getEditMenuInfo',\n    params: { id }\n  })\n}\n\n// 获取菜单列表\nexport const getAllMenus = (): Promise<{ data: GetAllMenus }> => {\n  return request({\n    method: 'get',\n    url: '/boss/menu/getAll'\n  })\n}\n\n// 删除菜单项\nexport const menuDelete = (id: number): Promise<{ data: MenuUpdate }> => {\n  return request({\n    method: 'delete',\n    url: `/boss/menu/${id}`\n  })\n}\n\n// 查询所有菜单并按层级展示\nexport const getMenuNodeList = (): Promise<{ data: GetMenuNodeList }> => {\n  return request({\n    method: 'get',\n    url: '/boss/menu/getMenuNodeList'\n  })\n}\n\n// 给角色分配菜单\nexport const allocateRoleMenus = (data: {\n  roleId: number | string;\n  menuIdList: number[]\n}): Promise<{ data: MenuUpdate }> => {\n  return request({\n    method: 'post',\n    url: '/boss/menu/allocateRoleMenus',\n    data\n  })\n}\n// 获取角色拥有的菜单\nexport const getRoleMenus = (roleId: number | string): Promise<{ data: GetMenuNodeList }> => {\n  return request({\n    method: 'get',\n    url: '/boss/menu/getRoleMenus',\n    params: {\n      roleId\n    }\n  })\n}\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--9-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--9-oneOf-1-1!../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--9-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--9-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader-v16/dist/index.js??ref--1-1!./index.vue?vue&type=style&index=0&id=6ddf98be&lang=scss&scoped=true\"","import { createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-6ddf98be\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { class: \"main-container\" }\nconst _hoisted_2 = /*#__PURE__*/_createTextVNode(\"添加菜单\")\nconst _hoisted_3 = [\"onClick\"]\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"a\", null, \"删除\", -1))\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_a_button = _resolveComponent(\"a-button\")!\n  const _component_a_divider = _resolveComponent(\"a-divider\")!\n  const _component_a_popconfirm = _resolveComponent(\"a-popconfirm\")!\n  const _component_a_table = _resolveComponent(\"a-table\")!\n  const _component_a_card = _resolveComponent(\"a-card\")!\n\n  return (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [\n    _createVNode(_component_a_card, { bordered: false }, {\n      title: _withCtx(() => [\n        _createVNode(_component_a_button, {\n          onClick: _cache[0] || (_cache[0] = ($event: any) => (_ctx.$router.push({ name: 'menuCreate' })))\n        }, {\n          default: _withCtx(() => [\n            _hoisted_2\n          ]),\n          _: 1\n        })\n      ]),\n      default: _withCtx(() => [\n        _createVNode(_component_a_table, {\n          columns: _ctx.columns,\n          \"data-source\": _ctx.menus,\n          rowKey: \"id\",\n          scroll: { x: 1000, y: _ctx.scrollY },\n          loading: _ctx.loading\n        }, {\n          index: _withCtx(({ record }) => [\n            _createElementVNode(\"a\", null, _toDisplayString(record), 1)\n          ]),\n          operation: _withCtx(({ record }) => [\n            _createElementVNode(\"span\", null, [\n              _createElementVNode(\"a\", {\n                onClick: ($event: any) => (_ctx.$router.push({ name: 'menuEdit', params: { id: record.id } }))\n              }, \"编辑\", 8, _hoisted_3),\n              _createVNode(_component_a_divider, { type: \"vertical\" }),\n              (_ctx.menus.length)\n                ? (_openBlock(), _createBlock(_component_a_popconfirm, {\n                    key: 0,\n                    title: \"确认删除？\",\n                    onConfirm: ($event: any) => (_ctx.onDelete(record.id))\n                  }, {\n                    default: _withCtx(() => [\n                      _hoisted_4\n                    ]),\n                    _: 2\n                  }, 1032, [\"onConfirm\"]))\n                : _createCommentVNode(\"\", true)\n            ])\n          ]),\n          _: 1\n        }, 8, [\"columns\", \"data-source\", \"scroll\", \"loading\"])\n      ]),\n      _: 1\n    })\n  ]))\n}","\nimport { defineComponent, reactive, ref, toRefs } from 'vue'\nimport { getAllMenus, menuDelete } from '@/services/menu'\nimport { FormState } from '@/types/menu'\nimport { message } from 'ant-design-vue'\n\nconst columns = [\n  {\n    title: '编号',\n    dataIndex: 'id',\n    width: 80\n  },\n  {\n    title: '菜单名称',\n    dataIndex: 'name',\n    width: 160\n  },\n  {\n    title: '菜单级数',\n    dataIndex: 'parentId',\n    width: 160\n  },\n  {\n    title: '前端图标',\n    dataIndex: 'icon',\n    width: 160\n  },\n  {\n    title: '排序',\n    key: 'orderNum',\n    dataIndex: 'orderNum',\n    width: 160\n  },\n  {\n    title: '操作',\n    dataIndex: 'operation',\n    fixed: 'right',\n    width: 180,\n    align: 'center',\n    slots: { customRender: 'operation' }\n  }\n]\n\nexport default defineComponent({\n  data () {\n    return {\n      scrollY: 400\n    }\n  },\n  setup () {\n    const menus = ref<FormState[]>([])\n    const state = reactive({\n      loading: false\n    })\n    return {\n      ...toRefs(state),\n      menus,\n      columns\n    }\n  },\n  created () {\n    this.loadAllMenus()\n  },\n  async mounted () {\n    this.tableScrollCalculate()\n    window.addEventListener('resize', async () => {\n      this.tableScrollCalculate()\n    })\n  },\n  methods: {\n    async loadAllMenus () {\n      this.loading = true\n      try {\n        const { data } = await getAllMenus()\n        if (data.code === '000000') {\n          this.menus = data.data\n        }\n      } catch (error) {}\n      this.loading = false\n    },\n    async onDelete (id: number) {\n      const { data } = await menuDelete(id)\n      if (data.code === '000000') {\n        message.success(data.mesg)\n        this.loadAllMenus()\n      } else {\n        message.error('删除失败了，请稍后再试')\n      }\n    },\n    tableScrollCalculate () {\n      const el = document.querySelector('.ant-spin-container')\n      if (el && el?.clientHeight > 400) {\n        this.scrollY = el?.clientHeight - 55 - 64\n      }\n    }\n  }\n})\n","import { render } from \"./index.vue?vue&type=template&id=6ddf98be&scoped=true&ts=true\"\nimport script from \"./index.vue?vue&type=script&lang=ts\"\nexport * from \"./index.vue?vue&type=script&lang=ts\"\n\nimport \"./index.vue?vue&type=style&index=0&id=6ddf98be&lang=scss&scoped=true\"\n\nimport exportComponent from \"/home/runner/work/fed/fed/node_modules/vue-loader-v16/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-6ddf98be\"]])\n\nexport default __exports__"],"sourceRoot":""}