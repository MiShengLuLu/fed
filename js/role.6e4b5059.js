(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["role"],{"6c35":function(e,t,n){"use strict";n.r(t);n("b0c0"),n("a4d3"),n("e01a");var r=n("7a23"),o=function(e){return Object(r["pushScopeId"])("data-v-214f41fa"),e=e(),Object(r["popScopeId"])(),e},a={class:"main-container"},c=Object(r["createTextVNode"])(" 查询 "),l=Object(r["createTextVNode"])(" 重置 "),i=Object(r["createTextVNode"])("添加角色"),u=["onClick"],d=["onClick"],s=["onClick"],f=o((function(){return Object(r["createElementVNode"])("a",null,"删除",-1)})),b={key:0},m={key:1};function O(e,t,n,o,O,p){var j=Object(r["resolveComponent"])("a-input"),v=Object(r["resolveComponent"])("a-form-item"),h=Object(r["resolveComponent"])("a-button"),g=Object(r["resolveComponent"])("a-divider"),C=Object(r["resolveComponent"])("a-form"),w=Object(r["resolveComponent"])("a-popconfirm"),x=Object(r["resolveComponent"])("a-table"),k=Object(r["resolveComponent"])("a-pagination"),V=Object(r["resolveComponent"])("a-card"),N=Object(r["resolveComponent"])("a-textarea"),R=Object(r["resolveComponent"])("a-modal");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createElementVNode"])("div",a,[Object(r["createVNode"])(V,{bordered:!1},{title:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{layout:"inline",model:e.formState},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{label:"输入搜索"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{value:e.formState.name,"onUpdate:value":t[0]||(t[0]=function(t){return e.formState.name=t}),placeholder:"角色名称"},null,8,["value"])]})),_:1}),Object(r["createVNode"])(v,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{type:"primary",onClick:e.getRolePages,disabled:e.loading},{default:Object(r["withCtx"])((function(){return[c]})),_:1},8,["onClick","disabled"]),Object(r["createVNode"])(g,{type:"vertical"}),Object(r["createVNode"])(h,{onClick:e.onReset,disabled:e.loading},{default:Object(r["withCtx"])((function(){return[l]})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1},8,["model"])]})),default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{onClick:e.addRole,disabled:e.loading},{default:Object(r["withCtx"])((function(){return[i]})),_:1},8,["onClick","disabled"]),Object(r["createVNode"])(x,{columns:e.columns,"data-source":e.dataSource,rowKey:"id",scroll:{x:1e3,y:e.scrollY},pagination:!1,loading:e.loading},{action:Object(r["withCtx"])((function(t){var n=t.record;return[Object(r["createElementVNode"])("span",null,[Object(r["createElementVNode"])("a",{onClick:function(t){return e.$router.push({name:"allocMenu",params:{roleId:n.id}})}},"分配菜单",8,u),Object(r["createVNode"])(g,{type:"vertical"}),Object(r["createElementVNode"])("a",{onClick:function(t){return e.$router.push({name:"allocResource",params:{roleId:n.id}})}},"分配资源",8,d),Object(r["createVNode"])(g,{type:"vertical"}),Object(r["createElementVNode"])("a",{onClick:function(t){return e.editRole(n.id)}},"编辑",8,s),Object(r["createVNode"])(g,{type:"vertical"}),e.dataSource.length?(Object(r["openBlock"])(),Object(r["createBlock"])(w,{key:0,title:"确认删除？",onConfirm:function(t){return e.onDelete(n.id)}},{default:Object(r["withCtx"])((function(){return[f]})),_:2},1032,["onConfirm"])):Object(r["createCommentVNode"])("",!0)])]})),_:1},8,["columns","data-source","scroll","loading"]),Object(r["createVNode"])(k,{current:e.formState.current,"onUpdate:current":t[1]||(t[1]=function(t){return e.formState.current=t}),total:e.total,"show-size-changer":"","show-quick-jumper":"","page-size":e.formState.size,showTotal:function(e){return"总共 ".concat(e," 条")},onShowSizeChange:e.changePageSize,onChange:e.changePage,disabled:e.loading},{buildOptionText:Object(r["withCtx"])((function(e){return["50"!==e.value?(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",b,Object(r["toDisplayString"])(e.value)+"条/页",1)):(Object(r["openBlock"])(),Object(r["createElementBlock"])("span",m,"全部"))]})),_:1},8,["current","total","page-size","showTotal","onShowSizeChange","onChange","disabled"])]})),_:1})]),Object(r["createVNode"])(R,{title:e.modalTitle,visible:e.visible,"onUpdate:visible":t[5]||(t[5]=function(t){return e.visible=t}),"confirm-loading":e.confirmLoading,onOk:e.handleOk,onCancel:e.cancel},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{ref:"formRef",model:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(v,{label:"角色名称",required:"",name:"name"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{value:e.form.name,"onUpdate:value":t[2]||(t[2]=function(t){return e.form.name=t})},null,8,["value"])]})),_:1}),Object(r["createVNode"])(v,{label:"角色编码",required:"",name:"code"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(j,{value:e.form.code,"onUpdate:value":t[3]||(t[3]=function(t){return e.form.code=t})},null,8,["value"])]})),_:1}),Object(r["createVNode"])(v,{label:"描述",name:"description"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(N,{value:e.form.description,"onUpdate:value":t[4]||(t[4]=function(t){return e.form.description=t})},null,8,["value"])]})),_:1})]})),_:1},8,["model","label-col","wrapper-col","rules"])]})),_:1},8,["title","visible","confirm-loading","onOk","onCancel"])],64)}n("380f");var p=n("f64c"),j=n("1da1"),v=(n("96cf"),n("8e39")),h=[{title:"编号",dataIndex:"id"},{title:"角色名称",dataIndex:"name"},{title:"描述",dataIndex:"description"},{title:"添加时间",dataIndex:"createdTime"},{title:"操作",key:"action",width:220,fixed:"right",slots:{customRender:"action"}}],g={name:[{required:!0,message:"请输入角色名称"}],code:[{required:!0,message:"请输入角色编码"}]},C={inlineForm:{name:"",current:1,size:10},form:{name:"",code:"",description:""}},w=Object(r["defineComponent"])({name:"Role",data:function(){return{scrollY:320}},setup:function(){var e=Object(r["ref"])(C.inlineForm),t=Object(r["ref"])([]),n=Object(r["ref"])(0),o=Object(r["ref"])(!1),a=function(){var r=Object(j["a"])(regeneratorRuntime.mark((function r(){var a,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return o.value=!0,r.next=3,Object(v["f"])(e.value);case 3:a=r.sent,c=a.data,o.value=!1,"000000"===c.code&&(t.value=c.data.records,n.value=c.data.total);case 7:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),c=Object(r["ref"])(),l=Object(r["ref"])(!1),i=Object(r["ref"])(!1),u=Object(r["ref"])(C.form),d=Object(r["ref"])(),s=function(){c.value="添加角色",l.value=!0},f=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.value.validate();case 3:return i.value=!0,e.next=6,Object(v["g"])(u.value);case 6:t=e.sent,n=t.data,"000000"===n.code?(p["a"].success(n.mesg),a(),l.value=!1,m()):p["a"].error(n.mesg),i.value=!1,e.next=14;break;case 12:e.prev=12,e.t0=e["catch"](0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c.value="编辑角色",e.next=3,Object(v["c"])(t);case 3:n=e.sent,r=n.data,l.value=!0,"000000"===r.code&&(u.value=r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){u.value=C.form,d.value.clearValidate()};return{dataSource:t,getRolePages:a,editRole:b,total:n,columns:h,loading:o,formState:e,modalTitle:c,visible:l,confirmLoading:i,formRef:d,addRole:s,handleOk:f,form:u,rules:g,labelCol:{span:4},wrapperCol:{span:14},cancel:m}},created:function(){this.getRolePages()},mounted:function(){var e=this;this.tableScrollCalculate(),window.addEventListener("resize",(function(){e.tableScrollCalculate()}))},methods:{onDelete:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function n(){var r,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,Object(v["b"])(e);case 2:r=n.sent,o=r.data,"000000"===o.code?(p["a"].success(o.mesg),t.getRolePages()):p["a"].error("删除失败了，请稍后再试");case 5:case"end":return n.stop()}}),n)})))()},tableScrollCalculate:function(){var e=document.querySelector(".ant-spin-container");e&&(null===e||void 0===e?void 0:e.clientHeight)>320&&(this.scrollY=(null===e||void 0===e?void 0:e.clientHeight)-55-64-85)},onReset:function(){this.formState.name="",this.formState.current=1,this.getRolePages()},changePage:function(e){this.formState.current=e,this.getRolePages()},changePageSize:function(e,t){this.formState.current=1,this.formState.size=t,this.getRolePages()}}}),x=(n("fcd9"),n("6b0d")),k=n.n(x);const V=k()(w,[["render",O],["__scopeId","data-v-214f41fa"]]);t["default"]=V},"8e39":function(e,t,n){"use strict";n.d(t,"f",(function(){return o})),n.d(t,"g",(function(){return a})),n.d(t,"c",(function(){return c})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return i})),n.d(t,"a",(function(){return u})),n.d(t,"e",(function(){return d}));var r=n("b32d"),o=function(e){return Object(r["a"])({method:"post",url:"/boss/role/getRolePages",data:e})},a=function(e){return Object(r["a"])({method:"post",url:"/boss/role/saveOrUpdate",data:e})},c=function(e){return Object(r["a"])({method:"get",url:"/boss/role/".concat(e)})},l=function(e){return Object(r["a"])({method:"delete",url:"/boss/role/".concat(e)})},i=function(){return Object(r["a"])({method:"get",url:"/boss/role/all"})},u=function(e){return Object(r["a"])({method:"post",url:"/boss/role/allocateUserRoles",data:e})},d=function(e){return Object(r["a"])({method:"get",url:"/boss/role/user/".concat(e)})}},c3f3:function(e,t,n){},fcd9:function(e,t,n){"use strict";n("c3f3")}}]);
//# sourceMappingURL=role.6e4b5059.js.map