(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["resource"],{2240:function(e,t,r){"use strict";r.r(t);r("b0c0"),r("a4d3"),r("e01a");var n=r("7a23"),c=function(e){return Object(n["pushScopeId"])("data-v-457ab230"),e=e(),Object(n["popScopeId"])(),e},o={class:"main-container"},a=Object(n["createTextVNode"])(" 查询 "),u=Object(n["createTextVNode"])(" 重置 "),l=Object(n["createTextVNode"])("添加"),i=Object(n["createTextVNode"])("资源分类"),d=["onClick"],s=c((function(){return Object(n["createElementVNode"])("a",null,"删除",-1)})),f={key:0},b={key:1};function m(e,t,r,c,m,O){var j=Object(n["resolveComponent"])("a-input"),p=Object(n["resolveComponent"])("a-form-item"),v=Object(n["resolveComponent"])("a-select-option"),h=Object(n["resolveComponent"])("a-select"),g=Object(n["resolveComponent"])("a-button"),C=Object(n["resolveComponent"])("a-divider"),w=Object(n["resolveComponent"])("a-form"),x=Object(n["resolveComponent"])("a-popconfirm"),k=Object(n["resolveComponent"])("a-table"),y=Object(n["resolveComponent"])("a-pagination"),V=Object(n["resolveComponent"])("a-card"),N=Object(n["resolveComponent"])("a-textarea"),S=Object(n["resolveComponent"])("a-modal");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createElementVNode"])("div",o,[Object(n["createVNode"])(V,{bordered:!1},{title:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{layout:"inline",model:e.formState},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{label:"资源名称"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{value:e.formState.name,"onUpdate:value":t[0]||(t[0]=function(t){return e.formState.name=t}),placeholder:"请输入资源名称"},null,8,["value"])]})),_:1}),Object(n["createVNode"])(p,{label:"资源路径"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{value:e.formState.url,"onUpdate:value":t[1]||(t[1]=function(t){return e.formState.url=t}),placeholder:"请输入资源路径"},null,8,["value"])]})),_:1}),Object(n["createVNode"])(p,{label:"资源分类"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{value:e.formState.categoryId,"onUpdate:value":t[2]||(t[2]=function(t){return e.formState.categoryId=t}),style:{width:"120px"},ref:"select",placeholder:"请选择资源分类",allowClear:""},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.category,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:e.id,value:e.id},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(p,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,{type:"primary",onClick:e.getResources,disabled:e.loading},{default:Object(n["withCtx"])((function(){return[a]})),_:1},8,["onClick","disabled"]),Object(n["createVNode"])(C,{type:"vertical"}),Object(n["createVNode"])(g,{onClick:e.onReset,disabled:e.loading},{default:Object(n["withCtx"])((function(){return[u]})),_:1},8,["onClick","disabled"])]})),_:1})]})),_:1},8,["model"])]})),default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g,{onClick:e.addResource,disabled:e.loading},{default:Object(n["withCtx"])((function(){return[l]})),_:1},8,["onClick","disabled"]),Object(n["createVNode"])(C,{type:"vertical"}),Object(n["createVNode"])(g,{onClick:t[3]||(t[3]=function(t){return e.$router.push({name:"category"})})},{default:Object(n["withCtx"])((function(){return[i]})),_:1}),Object(n["createVNode"])(k,{columns:e.columns,"data-source":e.resources,rowKey:"id",scroll:{x:1e3,y:e.scrollY},pagination:!1,loading:e.loading},{action:Object(n["withCtx"])((function(t){var r=t.record;return[Object(n["createElementVNode"])("span",null,[Object(n["createElementVNode"])("a",{onClick:function(t){return e.editResource(r.id)}},"编辑",8,d),Object(n["createVNode"])(C,{type:"vertical"}),e.resources.length?(Object(n["openBlock"])(),Object(n["createBlock"])(x,{key:0,title:"确认删除？",onConfirm:function(t){return e.onDelete(r.id)}},{default:Object(n["withCtx"])((function(){return[s]})),_:2},1032,["onConfirm"])):Object(n["createCommentVNode"])("",!0)])]})),_:1},8,["columns","data-source","scroll","loading"]),Object(n["createVNode"])(y,{current:e.formState.current,"onUpdate:current":t[4]||(t[4]=function(t){return e.formState.current=t}),total:e.total,"show-size-changer":"","show-quick-jumper":"","page-size":e.formState.size,showTotal:function(e){return"总共 ".concat(e," 条")},onShowSizeChange:e.changePageSize,onChange:e.changePage,disabled:e.loading},{buildOptionText:Object(n["withCtx"])((function(e){return["50"!==e.value?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",f,Object(n["toDisplayString"])(e.value)+"条/页",1)):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",b,"全部"))]})),_:1},8,["current","total","page-size","showTotal","onShowSizeChange","onChange","disabled"])]})),_:1})]),Object(n["createVNode"])(S,{title:e.modalTitle,visible:e.visible,"onUpdate:visible":t[9]||(t[9]=function(t){return e.visible=t}),"confirm-loading":e.confirmLoading,onOk:e.handleOk,onCancel:e.cancel},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{ref:"formRef",model:e.form,"label-col":e.labelCol,"wrapper-col":e.wrapperCol,rules:e.rules},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{label:"资源名称",required:"",name:"name"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{value:e.form.name,"onUpdate:value":t[5]||(t[5]=function(t){return e.form.name=t})},null,8,["value"])]})),_:1}),Object(n["createVNode"])(p,{label:"资源路径",required:"",name:"url"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{value:e.form.url,"onUpdate:value":t[6]||(t[6]=function(t){return e.form.url=t})},null,8,["value"])]})),_:1}),Object(n["createVNode"])(p,{label:"角色管理",required:"",name:"categoryId"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{value:e.form.categoryId,"onUpdate:value":t[7]||(t[7]=function(t){return e.form.categoryId=t})},{default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.category,(function(e){return Object(n["openBlock"])(),Object(n["createBlock"])(v,{key:e.id,value:e.id},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(e.name),1)]})),_:2},1032,["value"])})),128))]})),_:1},8,["value"])]})),_:1}),Object(n["createVNode"])(p,{label:"描述",name:"description"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(N,{value:e.form.description,"onUpdate:value":t[8]||(t[8]=function(t){return e.form.description=t})},null,8,["value"])]})),_:1})]})),_:1},8,["model","label-col","wrapper-col","rules"])]})),_:1},8,["title","visible","confirm-loading","onOk","onCancel"])],64)}r("380f");var O=r("f64c"),j=r("1da1"),p=(r("96cf"),r("e2cf")),v=[{title:"编号",dataIndex:"id"},{title:"资源名称",dataIndex:"name"},{title:"资源路径",dataIndex:"url"},{title:"描述",dataIndex:"description"},{title:"添加时间",dataIndex:"createdTime"},{title:"操作",key:"action",width:180,fixed:"right",align:"center",slots:{customRender:"action"}}],h={inlineForm:{name:"",url:"",categoryId:null,current:1,size:10},form:{name:"",url:"",categoryId:null,description:""}},g={name:[{required:!0,message:"请输入资源名称"}],url:[{required:!0,message:"请输入资源路径"}],categoryId:[{required:!0,message:"请选择角色管理"}]},C=Object(n["defineComponent"])({name:"Resources",data:function(){return{scrollY:320}},setup:function(){var e=Object(n["ref"])(h.inlineForm),t=Object(n["ref"])([]),r=Object(n["ref"])([]),c=Object(n["ref"])(0),o=Object(n["ref"])(!1),a=function(){var t=Object(j["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return o.value=!0,t.next=3,Object(p["g"])(e.value);case 3:n=t.sent,a=n.data,o.value=!1,"000000"===a.code&&(r.value=a.data.records,c.value=a.data.total);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),u=Object(n["ref"])(),l=Object(n["ref"])(!1),i=Object(n["ref"])(!1),d=Object(n["ref"])(h.form),s=Object(n["ref"])(),f=function(){u.value="添加资源",l.value=!0},b=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(){var t,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,s.value.validate();case 3:return i.value=!0,e.next=6,Object(p["j"])(d.value);case 6:t=e.sent,r=t.data,"000000"===r.code?(O["a"].success(r.mesg),a(),l.value=!1,C()):O["a"].error(r.mesg),i.value=!1,e.next=15;break;case 12:e.prev=12,e.t0=e["catch"](0),i.value=!1;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(j["a"])(regeneratorRuntime.mark((function e(t){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u.value="编辑资源",e.next=3,Object(p["f"])(t);case 3:r=e.sent,n=r.data,l.value=!0,"000000"===n.code&&(d.value=n.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=function(){d.value=h.form,s.value.clearValidate()};return{resources:r,getResources:a,total:c,columns:v,loading:o,formState:e,category:t,modalTitle:u,visible:l,confirmLoading:i,addResource:f,handleOk:b,formRef:s,form:d,rules:g,labelCol:{span:4},wrapperCol:{span:14},cancel:C,editResource:m}},created:function(){this.loadCategory(),this.getResources()},mounted:function(){var e=this;this.tableScrollCalculate(),window.addEventListener("resize",(function(){e.tableScrollCalculate()}))},methods:{loadCategory:function(){var e=this;return Object(j["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(p["e"])();case 2:r=t.sent,n=r.data,"000000"===n.code&&(e.category=n.data);case 5:case"end":return t.stop()}}),t)})))()},onDelete:function(e){var t=this;return Object(j["a"])(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(p["c"])(e);case 2:n=r.sent,c=n.data,"000000"===c.code?(O["a"].success(c.mesg),t.getResources()):O["a"].error("删除失败了，请稍后再试");case 5:case"end":return r.stop()}}),r)})))()},tableScrollCalculate:function(){var e=document.querySelector(".ant-spin-container");e&&(null===e||void 0===e?void 0:e.clientHeight)>320&&(this.scrollY=(null===e||void 0===e?void 0:e.clientHeight)-55-64-85)},onReset:function(){this.formState.name="",this.formState.url="",this.formState.categoryId=null,this.formState.current=1,this.getResources()},changePage:function(e){this.formState.current=e,this.getResources()},changePageSize:function(e,t){this.formState.current=1,this.formState.size=t,this.getResources()}}}),w=(r("f8d9"),r("6b0d")),x=r.n(w);const k=x()(C,[["render",m],["__scopeId","data-v-457ab230"]]);t["default"]=k},7287:function(e,t,r){},e2cf:function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"g",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"j",(function(){return u})),r.d(t,"f",(function(){return l})),r.d(t,"e",(function(){return i})),r.d(t,"i",(function(){return d})),r.d(t,"b",(function(){return s})),r.d(t,"a",(function(){return f})),r.d(t,"h",(function(){return b}));var n=r("b32d"),c=function(){return Object(n["a"])({method:"get",url:"/boss/resource/getAll"})},o=function(e){return Object(n["a"])({method:"post",url:"/boss/resource/getResourcePages",data:e})},a=function(e){return Object(n["a"])({method:"delete",url:"/boss/resource/".concat(e)})},u=function(e){return Object(n["a"])({method:"post",url:"/boss/resource/saveOrUpdate",data:e})},l=function(e){return Object(n["a"])({method:"get",url:"/boss/resource/".concat(e)})},i=function(e){return Object(n["a"])({method:"get",url:"/boss/resource/category/getAll",params:{resourceId:e}})},d=function(e){return Object(n["a"])({method:"post",url:"/boss/resource/category/saveOrderUpdate",data:e})},s=function(e){return Object(n["a"])({method:"delete",url:"/boss/resource/category/".concat(e)})},f=function(e){return Object(n["a"])({method:"post",url:"/boss/resource/allocateRoleResources",data:e})},b=function(e){return Object(n["a"])({method:"get",url:"/boss/resource/getRoleResources",params:{roleId:e}})}},f8d9:function(e,t,r){"use strict";r("7287")}}]);
//# sourceMappingURL=resource.1e158bea.js.map