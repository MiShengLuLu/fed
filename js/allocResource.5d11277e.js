(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["allocResource"],{"20c3":function(e,t,r){},"28f3":function(e,t,r){"use strict";r("20c3")},"408a":function(e,t,r){var n=r("e330");e.exports=n(1..valueOf)},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var n=r("e330"),c=r("1d80"),o=r("577e"),a=r("5899"),u=n("".replace),i="["+a+"]",s=RegExp("^"+i+i+"*"),d=RegExp(i+i+"*$"),f=function(e){return function(t){var r=o(c(t));return 1&e&&(r=u(r,s,"")),2&e&&(r=u(r,d,"")),r}};e.exports={start:f(1),end:f(2),trim:f(3)}},"68c0":function(e,t,r){"use strict";r.r(t);r("b0c0");var n=r("7a23"),c={class:"main-container"},o={class:"inner-container"},a={class:"footer-container"},u=Object(n["createTextVNode"])("保存"),i=Object(n["createTextVNode"])("清空"),s=Object(n["createTextVNode"])(" 返回 ");function d(e,t,r,d,f,l){var b=Object(n["resolveComponent"])("a-checkbox"),p=Object(n["resolveComponent"])("a-card"),h=Object(n["resolveComponent"])("a-button"),O=Object(n["resolveComponent"])("a-divider"),g=Object(n["resolveComponent"])("ArrowLeftOutlined");return Object(n["openBlock"])(),Object(n["createElementBlock"])("section",c,[Object(n["createElementVNode"])("div",o,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.categories,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])(p,{bordered:!0,key:t.id},{title:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(b,{checked:t.selected,"onUpdate:checked":function(e){return t.selected=e},value:t.id,"onUpdate:value":function(e){return t.id=e},onChange:e.onCheckAllChange},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(t.name),1)]})),_:2},1032,["checked","onUpdate:checked","value","onUpdate:value","onChange"])]})),default:Object(n["withCtx"])((function(){return[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(e.resources,(function(r){return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],{key:r.id},[r.categoryId===t.id?(Object(n["openBlock"])(),Object(n["createBlock"])(b,{checked:r.selected,"onUpdate:checked":function(e){return r.selected=e},value:r.id,"onUpdate:value":function(e){return r.id=e},key:r.id,onChange:function(t){return e.onChange(t,r.categoryId)}},{default:Object(n["withCtx"])((function(){return[Object(n["createTextVNode"])(Object(n["toDisplayString"])(r.name),1)]})),_:2},1032,["checked","onUpdate:checked","value","onUpdate:value","onChange"])):Object(n["createCommentVNode"])("",!0)],64)})),128))]})),_:2},1024)})),128)),Object(n["createElementVNode"])("div",a,[Object(n["createVNode"])(h,{type:"primary",onClick:e.onSubmit},{default:Object(n["withCtx"])((function(){return[u]})),_:1},8,["onClick"]),Object(n["createVNode"])(O,{type:"vertical"}),Object(n["createVNode"])(h,{onClick:e.clear},{default:Object(n["withCtx"])((function(){return[i]})),_:1},8,["onClick"]),Object(n["createVNode"])(O,{type:"vertical"}),Object(n["createVNode"])(h,{onClick:t[0]||(t[0]=function(t){return e.$router.back()})},{icon:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(g)]})),default:Object(n["withCtx"])((function(){return[s]})),_:1})])])])}var f=r("5530"),l=(r("380f"),r("f64c")),b=r("1da1"),p=(r("96cf"),r("a9e3"),r("d3b7"),r("159b"),r("a434"),r("c740"),r("a630"),r("3ca3"),r("e2cf")),h=r("1cd4"),O=r("6c02"),g=Object(n["defineComponent"])({name:"allocResource",components:{ArrowLeftOutlined:h["a"]},props:{roleId:{type:[Number,String],required:!0}},setup:function(e){var t=Object(n["reactive"])({categories:Object(n["ref"])([]),resources:Object(n["ref"])([]),checkAll:!1,resourceIdList:Object(n["ref"])([])}),r=Object(O["d"])(),c=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["e"])();case 2:r=e.sent,n=r.data,"000000"===n.code&&(t.categories=n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=function(){var e=Object(b["a"])(regeneratorRuntime.mark((function e(){var r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(p["d"])();case 2:r=e.sent,n=r.data,"000000"===n.code&&(t.resources=n.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(e){t.resources.forEach((function(r,n){r.categoryId===e.target.value&&(e.target.checked||t.resourceIdList.splice(n),r.selected=e.target.checked,r.id&&t.resourceIdList.push(r.id))}))},u=function(e,r){var n=0,c=0;if(e.target.checked){var o=t.resourceIdList.findIndex((function(t){return t===e.target.value}));o<0&&t.resourceIdList.push(e.target.value),t.resources.forEach((function(e){e.categoryId===r&&(n++,e.selected&&c++)}))}else{var a=t.resourceIdList.findIndex((function(t){return t===e.target.value}));a>=0&&t.resourceIdList.splice(a,1)}t.categories.forEach((function(e){e.id===r&&n===c&&n&&c?e.selected=!0:e.selected=!1}))},i=function(){var n=Object(b["a"])(regeneratorRuntime.mark((function n(){var c,o,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return c=t.resourceIdList,n.next=3,Object(p["a"])({roleId:Number(e.roleId),resourceIdList:Array.from(c)});case 3:o=n.sent,a=o.data,"000000"===a.code?(l["a"].success(a.mesg,1),r.back()):l["a"].error(a.mesg);case 6:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),s=function(){var r=Object(b["a"])(regeneratorRuntime.mark((function r(){var n,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,Object(p["h"])(Number(e.roleId));case 2:n=r.sent,c=n.data,"000000"===c.code&&c.data.forEach((function(e){if(e.id){t.resourceIdList.push(e.id);var r=t.resources.findIndex((function(t){return t.id===e.id}));r>-1&&(t.resources[r].selected=!0)}}));case 5:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}(),d=function(){t.resourceIdList=[],t.resources.forEach((function(e){e.selected&&(e.selected=!1)}))};return Object(f["a"])(Object(f["a"])({},Object(n["toRefs"])(t)),{},{getAllCategory:c,loadAllResource:o,loadRoleResources:s,onCheckAllChange:a,onChange:u,onSubmit:i,clear:d})},created:function(){this.getAllCategory(),this.loadAllResource(),this.loadRoleResources()}}),j=(r("28f3"),r("6b0d")),m=r.n(j);const v=m()(g,[["render",d],["__scopeId","data-v-90ee1c78"]]);t["default"]=v},7156:function(e,t,r){var n=r("1626"),c=r("861d"),o=r("d2bb");e.exports=function(e,t,r){var a,u;return o&&n(a=t.constructor)&&a!==r&&c(u=a.prototype)&&u!==r.prototype&&o(e,u),e}},a434:function(e,t,r){"use strict";var n=r("23e7"),c=r("da84"),o=r("23cb"),a=r("5926"),u=r("07fa"),i=r("7b0b"),s=r("65f0"),d=r("8418"),f=r("1dde"),l=f("splice"),b=c.TypeError,p=Math.max,h=Math.min,O=9007199254740991,g="Maximum allowed length exceeded";n({target:"Array",proto:!0,forced:!l},{splice:function(e,t){var r,n,c,f,l,j,m=i(this),v=u(m),I=o(e,v),k=arguments.length;if(0===k?r=n=0:1===k?(r=0,n=v-I):(r=k-2,n=h(p(a(t),0),v-I)),v+r-n>O)throw b(g);for(c=s(m,n),f=0;f<n;f++)l=I+f,l in m&&d(c,f,m[l]);if(c.length=n,r<n){for(f=I;f<v-n;f++)l=f+n,j=f+r,l in m?m[j]=m[l]:delete m[j];for(f=v;f>v-n+r;f--)delete m[f-1]}else if(r>n)for(f=v-n;f>I;f--)l=f+n-1,j=f+r-1,l in m?m[j]=m[l]:delete m[j];for(f=0;f<r;f++)m[f+I]=arguments[f+2];return m.length=v-n+r,c}})},a9e3:function(e,t,r){"use strict";var n=r("83ab"),c=r("da84"),o=r("e330"),a=r("94ca"),u=r("6eeb"),i=r("1a2d"),s=r("7156"),d=r("3a9b"),f=r("d9b5"),l=r("c04e"),b=r("d039"),p=r("241c").f,h=r("06cf").f,O=r("9bf2").f,g=r("408a"),j=r("58a8").trim,m="Number",v=c[m],I=v.prototype,k=c.TypeError,x=o("".slice),N=o("".charCodeAt),y=function(e){var t=l(e,"number");return"bigint"==typeof t?t:C(t)},C=function(e){var t,r,n,c,o,a,u,i,s=l(e,"number");if(f(s))throw k("Cannot convert a Symbol value to a number");if("string"==typeof s&&s.length>2)if(s=j(s),t=N(s,0),43===t||45===t){if(r=N(s,2),88===r||120===r)return NaN}else if(48===t){switch(N(s,1)){case 66:case 98:n=2,c=49;break;case 79:case 111:n=8,c=55;break;default:return+s}for(o=x(s,2),a=o.length,u=0;u<a;u++)if(i=N(o,u),i<48||i>c)return NaN;return parseInt(o,n)}return+s};if(a(m,!v(" 0o1")||!v("0b1")||v("+0x1"))){for(var w,E=function(e){var t=arguments.length<1?0:v(y(e)),r=this;return d(I,r)&&b((function(){g(r)}))?s(Object(t),r,E):t},R=n?p(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),A=0;R.length>A;A++)i(v,w=R[A])&&!i(E,w)&&O(E,w,h(v,w));E.prototype=I,I.constructor=E,u(c,m,E)}},c740:function(e,t,r){"use strict";var n=r("23e7"),c=r("b727").findIndex,o=r("44d2"),a="findIndex",u=!0;a in[]&&Array(1)[a]((function(){u=!1})),n({target:"Array",proto:!0,forced:u},{findIndex:function(e){return c(this,e,arguments.length>1?arguments[1]:void 0)}}),o(a)},e2cf:function(e,t,r){"use strict";r.d(t,"d",(function(){return c})),r.d(t,"g",(function(){return o})),r.d(t,"c",(function(){return a})),r.d(t,"j",(function(){return u})),r.d(t,"f",(function(){return i})),r.d(t,"e",(function(){return s})),r.d(t,"i",(function(){return d})),r.d(t,"b",(function(){return f})),r.d(t,"a",(function(){return l})),r.d(t,"h",(function(){return b}));var n=r("b32d"),c=function(){return Object(n["a"])({method:"get",url:"/boss/resource/getAll"})},o=function(e){return Object(n["a"])({method:"post",url:"/boss/resource/getResourcePages",data:e})},a=function(e){return Object(n["a"])({method:"delete",url:"/boss/resource/".concat(e)})},u=function(e){return Object(n["a"])({method:"post",url:"/boss/resource/saveOrUpdate",data:e})},i=function(e){return Object(n["a"])({method:"get",url:"/boss/resource/".concat(e)})},s=function(e){return Object(n["a"])({method:"get",url:"/boss/resource/category/getAll",params:{resourceId:e}})},d=function(e){return Object(n["a"])({method:"post",url:"/boss/resource/category/saveOrderUpdate",data:e})},f=function(e){return Object(n["a"])({method:"delete",url:"/boss/resource/category/".concat(e)})},l=function(e){return Object(n["a"])({method:"post",url:"/boss/resource/allocateRoleResources",data:e})},b=function(e){return Object(n["a"])({method:"get",url:"/boss/resource/getRoleResources",params:{roleId:e}})}}}]);
//# sourceMappingURL=allocResource.5d11277e.js.map